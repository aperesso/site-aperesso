{"version":3,"file":"static/webpack/static/development/pages/index.js.1693eb4eb0cfa2ad0187.hot-update.js","sources":["webpack:///./node_modules/three/examples/jsm/postprocessing/GlitchPass.js","webpack:///./node_modules/three/examples/jsm/shaders/DigitalGlitch.js","webpack:///./webgl/index.js"],"sourcesContent":["/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tDataTexture,\n\tFloatType,\n\tMath as _Math,\n\tRGBFormat,\n\tShaderMaterial,\n\tUniformsUtils\n} from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\nimport { DigitalGlitch } from \"../shaders/DigitalGlitch.js\";\n\nvar GlitchPass = function ( dt_size ) {\n\n\tPass.call( this );\n\n\tif ( DigitalGlitch === undefined ) console.error( \"GlitchPass relies on DigitalGlitch\" );\n\n\tvar shader = DigitalGlitch;\n\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\tif ( dt_size == undefined ) dt_size = 64;\n\n\n\tthis.uniforms[ \"tDisp\" ].value = this.generateHeightmap( dt_size );\n\n\n\tthis.material = new ShaderMaterial( {\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\t} );\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n\tthis.goWild = false;\n\tthis.curF = 0;\n\tthis.generateTrigger();\n\n};\n\nGlitchPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: GlitchPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ 'seed' ].value = Math.random();//default seeding\n\t\tthis.uniforms[ 'byp' ].value = 0;\n\n\t\tif ( this.curF % this.randX == 0 || this.goWild == true ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\n\t\t\tthis.uniforms[ 'angle' ].value = _Math.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'seed_x' ].value = _Math.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = _Math.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = _Math.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = _Math.randFloat( 0, 1 );\n\t\t\tthis.curF = 0;\n\t\t\tthis.generateTrigger();\n\n\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\n\t\t\tthis.uniforms[ 'angle' ].value = _Math.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = _Math.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = _Math.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'seed_x' ].value = _Math.randFloat( - 0.3, 0.3 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = _Math.randFloat( - 0.3, 0.3 );\n\n\t\t} else if ( this.goWild == false ) {\n\n\t\t\tthis.uniforms[ 'byp' ].value = 1;\n\n\t\t}\n\n\t\tthis.curF ++;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t},\n\n\tgenerateTrigger: function () {\n\n\t\tthis.randX = _Math.randInt( 120, 240 );\n\n\t},\n\n\tgenerateHeightmap: function ( dt_size ) {\n\n\t\tvar data_arr = new Float32Array( dt_size * dt_size * 3 );\n\t\tvar length = dt_size * dt_size;\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar val = _Math.randFloat( 0, 1 );\n\t\t\tdata_arr[ i * 3 + 0 ] = val;\n\t\t\tdata_arr[ i * 3 + 1 ] = val;\n\t\t\tdata_arr[ i * 3 + 2 ] = val;\n\n\t\t}\n\n\t\treturn new DataTexture( data_arr, dt_size, dt_size, RGBFormat, FloatType );\n\n\t}\n\n} );\n\nexport { GlitchPass };\n","/**\n * @author felixturner / http://airtight.cc/\n *\n * RGB Shift Shader\n * Shifts red and blue channels from center in opposite directions\n * Ported from http://kriss.cx/tom/2009/05/rgb-shift/\n * by Tom Butterworth / http://kriss.cx/tom/\n *\n * amount: shift distance (1 is width of input)\n * angle: shift angle in radians\n */\n\n\n\nvar DigitalGlitch = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null }, //diffuse texture\n\t\t\"tDisp\": { value: null }, //displacement texture for digital glitch squares\n\t\t\"byp\": { value: 0 }, //apply the glitch ?\n\t\t\"amount\": { value: 0.08 },\n\t\t\"angle\": { value: 0.02 },\n\t\t\"seed\": { value: 0.02 },\n\t\t\"seed_x\": { value: 0.02 }, //-1,1\n\t\t\"seed_y\": { value: 0.02 }, //-1,1\n\t\t\"distortion_x\": { value: 0.5 },\n\t\t\"distortion_y\": { value: 0.6 },\n\t\t\"col_s\": { value: 0.05 }\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\t\t\"void main() {\",\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\"}\"\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\t\t\"uniform int byp;\", //should we apply the glitch ?\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform sampler2D tDisp;\",\n\n\t\t\"uniform float amount;\",\n\t\t\"uniform float angle;\",\n\t\t\"uniform float seed;\",\n\t\t\"uniform float seed_x;\",\n\t\t\"uniform float seed_y;\",\n\t\t\"uniform float distortion_x;\",\n\t\t\"uniform float distortion_y;\",\n\t\t\"uniform float col_s;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\n\t\t\"float rand(vec2 co){\",\n\t\t\"\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\",\n\t\t\"}\",\n\n\t\t\"void main() {\",\n\t\t\"\tif(byp<1) {\",\n\t\t\"\t\tvec2 p = vUv;\",\n\t\t\"\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\",\n\t\t\"\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\",\n\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\"\t\tvec4 normal = texture2D (tDisp, p*seed*seed);\",\n\t\t\"\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\",\n\t\t\"\t\t\tif(seed_x>0.){\",\n\t\t\"\t\t\t\tp.y = 1. - (p.y + distortion_y);\",\n\t\t\"\t\t\t}\",\n\t\t\"\t\t\telse {\",\n\t\t\"\t\t\t\tp.y = distortion_y;\",\n\t\t\"\t\t\t}\",\n\t\t\"\t\t}\",\n\t\t\"\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\",\n\t\t\"\t\t\tif(seed_y>0.){\",\n\t\t\"\t\t\t\tp.x=distortion_x;\",\n\t\t\"\t\t\t}\",\n\t\t\"\t\t\telse {\",\n\t\t\"\t\t\t\tp.x = 1. - (p.x + distortion_x);\",\n\t\t\"\t\t\t}\",\n\t\t\"\t\t}\",\n\t\t\"\t\tp.x+=normal.x*seed_x*(seed/5.);\",\n\t\t\"\t\tp.y+=normal.y*seed_y*(seed/5.);\",\n\t\t//base from RGB shift shader\n\t\t\"\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\",\n\t\t\"\t\tvec4 cr = texture2D(tDiffuse, p + offset);\",\n\t\t\"\t\tvec4 cga = texture2D(tDiffuse, p);\",\n\t\t\"\t\tvec4 cb = texture2D(tDiffuse, p - offset);\",\n\t\t\"\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\",\n\t\t//add noise\n\t\t\"\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\",\n\t\t\"\t\tgl_FragColor = gl_FragColor+ snow;\",\n\t\t\"\t}\",\n\t\t\"\telse {\",\n\t\t\"\t\tgl_FragColor=texture2D (tDiffuse, vUv);\",\n\t\t\"\t}\",\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { DigitalGlitch };\n","import * as THREE from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { GlitchPass } from 'three/examples/jsm/postprocessing/GlitchPass.js';\n\nimport { CAMERA_SETTINGS } from './utils/settings';\nimport Audio from './utils/audio';\nimport { getDimensions } from './utils';\n\nimport Sphere from './scene/sphere';\nimport Particles from './scene/particles';\n\n\nconst WebGL = function() {\n  const canvas = document.getElementById('webGL');\n  const { width , height } = getDimensions('webGL');\n\n  const scene = new THREE.Scene();\n  const camera = new THREE.PerspectiveCamera(CAMERA_SETTINGS.fov, width / height, CAMERA_SETTINGS.near, CAMERA_SETTINGS.far);\n  camera.position.set(0,0,20);\n\n  const renderer = new THREE.WebGLRenderer({ canvas , alpha: true });\n  renderer.setSize(width, height);\n  renderer.setClearColor(new THREE.Color('#010101'), 1.);\n  renderer.shadowMap.enabled = true;\n  renderer.gammaFactor = 2.2;\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n  renderer.toneMapping = THREE.ReinhardToneMapping;\n\n  const composer = new EffectComposer(renderer);\n  composer.setSize(width, height);\n\n  const renderScene = new RenderPass(scene, camera);\n  composer.addPass(renderScene);\n\n  const filmPass = new FilmPass(0.35,0.25, 648, false);\n  composer.addPass(filmPass)\n\n  const glitchPass = new GlitchPass(0.1);\n  composer.addPass(glitchPass);\n\n  const audio = new Audio();\n  const sphere = new Sphere();\n  const particles = new Particles();\n\n  this.load = async () => {\n    await audio.load();\n    sphere.setUp(audio);\n    scene.add(sphere.mesh);\n    await particles.setUp(audio);\n    scene.add(particles.points);\n  }\n\n  this.render = () => {\n    renderer.setAnimationLoop(\n      () => {\n        audio.update();\n        sphere.update();\n        particles.update();\n        // renderer.render(scene, camera);\n        composer.render();\n      }\n    )\n  }\n}\n\nexport default WebGL;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;AAIA;AAQA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAGA;AAGA;AACA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AA3EA;;;;;;;;;;;;;AC5CA;AAAA;AAAA;;;;;;;;;;;AAcA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAZA;AAeA;AASA;AAGA;AAyBA;AAoBA;AAMA;AAhFA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AACA;AADA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;A","sourceRoot":""}